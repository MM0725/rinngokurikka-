<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>テスト表示</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.2/p5.min.js"></script>
</head>
<body>
<script>
let treeImg;
let treeX = 300, treeY;
let treeW = 200, treeH = 400;
let groundY;
let apples = [];

function preload() {
  treeImg = loadImage('images/wood.png');
}

function setup() {
  createCanvas(windowWidth, windowHeight);
  groundY = height*0.85;
  treeY = groundY - treeH/2;

  for(let i=0;i<10;i++){
    let rx = random(-treeW/2+20, treeW/2-20);
    let ry = random(-treeH/2+20, -20);
    apples.push({x:treeX+rx, y:treeY+ry});
  }
}

function draw() {
  background(135,206,235);
  fill(90,60,40);
  rect(0,groundY,width,height-groundY); // 地面

  if(treeImg) imageMode(CENTER), image(treeImg, treeX, treeY, treeW, treeH);

  fill(255,0,0);
  rect(width*0.82-40, groundY-40, 80, 40); // 販売所土台
  triangle(width*0.82-50, groundY-40, width*0.82+50, groundY-40, width*0.82, groundY-80); // 屋根

  fill(255,0,0);
  for(let a of apples){
    ellipse(a.x, a.y, 30, 30);
  }
}
</script>
</body>
</html>
